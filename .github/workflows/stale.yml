name: "Close stale issues"

on:
  push:
    paths:
    - .github/workflows/stale.yml
  schedule:
    # Once every day
    - cron: "0 0 * * *"

jobs:
  stale:
    runs-on: ubuntu-latest
    steps:
      - name: Mark/Close Stale Issues and Pull Requests
        uses: actions/stale@v3
        with:
          repo-token: ${{ secrets.HOMEBREW_GITHUB_API_TOKEN }}
          days-before-stale: 21
          days-before-close: 7
          stale-issue-message: >
            This issue has been automatically marked as stale because it has not had
            recent activity. It will be closed if no further activity occurs.
          stale-pr-message: >
            This pull request has been automatically marked as stale because it has not had
            recent activity. It will be closed if no further activity occurs.
          exempt-issue-labels: 'gsoc-outreachy,help wanted,in progress'
          exempt-pr-labels: 'gsoc-outreachy,help wanted,in progress'

      - name: Close Issues with No Response
        uses: actions/stale@v3
        with:
          repo-token: ${{ secrets.HOMEBREW_GITHUB_API_TOKEN }}
          days-before-close: 14
          stale-issue-label: needs response
          stale-pr-label: needs response
          close-issue-message: >
            This issue has been automatically closed because there has been no response
            to our request for more information from the original author. With only the
            information that is currently in the issue, we don't have enough information
            to take action. Please reach out if you have or find the answers we need so
            that we can investigate further.
          close-pr-message: >
            This pull request has been automatically closed because there has been no response
            to our request for more information from the original author. With only the
            information that is currently in the pull request, we don't have enough information
            to take action. Please reach out if you have or find the answers we need so
            that we can investigate further.
